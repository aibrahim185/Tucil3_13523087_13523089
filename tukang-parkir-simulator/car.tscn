[gd_scene load_steps=3 format=3 uid="uid://fnl3pup0xgr8"]

[sub_resource type="GDScript" id="GDScript_24jkt"]
script/source = "extends Area2D

var length: int = 2 # Panjang mobil dalam unit grid (misal 2 atau 3)
var orientation: String = \"horizontal\" # Bisa \"horizontal\" atau \"vertical\"
var is_player_car: bool = false # Tandai jika ini mobil merah
var grid_pos: Vector2i # Posisi mobil dalam koordinat grid (misal, Vector2i(0, 2))

# Anda mungkin perlu referensi ke main game atau grid
# var main_game_node

func _ready():
	# Atur visual berdasarkan panjang dan orientasi jika perlu
	# Contoh: if length == 3: $Sprite2D.scale.x = 3 (jika sprite dasar 1 unit)
	pass

# Fungsi untuk mengatur detail mobil (dipanggil dari MainGame saat memuat level)
func setup_car(car_length: int, car_orientation: String, is_player: bool, initial_grid_pos: Vector2i):
	self.length = car_length
	self.orientation = car_orientation
	self.is_player_car = is_player
	self.grid_pos = initial_grid_pos

	# Sesuaikan Sprite2D dan CollisionShape2D berdasarkan panjang dan orientasi
	var cell_size = 64 # Ambil ini dari konfigurasi global atau MainGame
	if orientation == \"horizontal\":
		$Sprite2D.rotation_degrees = 0
		$CollisionShape2D.shape.size = Vector2(length * cell_size, cell_size)
	else: # Vertical
		$Sprite2D.rotation_degrees = 90 # Asumsi sprite horizontal
		$CollisionShape2D.shape.size = Vector2(cell_size, length * cell_size)

	# Atur warna jika ini mobil pemain
	if is_player_car:
		$Sprite2D.modulate = Color.RED
	else:
		# Atur warna lain untuk mobil non-pemain
		$Sprite2D.modulate = Color.BLUE # Contoh

	# Posisikan mobil di grid (konversi grid_pos ke posisi piksel)
	# Ini akan dilakukan di MainGame saat instansiasi
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_24jkt"]
size = Vector2(60, 124)

[node name="Car" type="Area2D"]
script = SubResource("GDScript_24jkt")

[node name="Sprite2D" type="Sprite2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(31, 64)
shape = SubResource("RectangleShape2D_24jkt")
